
\subsection{Motor Control}
The motors chosen for this project were the two small geared DC motors\footnote{ \href{https://www.sparkfun.com/products/13258}{Motors}}.
In order to control them an H-bridge for both of the motors were constructed using the schematics in figure \ref{fig:hbridge}.


\begin{figure}[H]
\centering
%\includegraphics[width = 0.9 \textwidth]{â€¢}

\caption{H-bridge schematics.}
\label{fig:hbridge}
\end{figure}

A full H-bridge is required in order to control the Segways movement in both directions such that it is able to both move and recover from a fall when moving around.
Each motor is made with each their separate H-bridge in order to facilitate the rotation of the segway.

A full H-bridge is required in order to control the Segways movement in both directions such that it is able to both move and recover from a fall when moving around.
Each motor is made with each their separate H-bridge in order to facilitate the rotation of the segway.

In a basic H-bridge, four transistors are used to drive the current on the motor in order to supply the motor with a virtual positive and negative power.
In the case of using MOSFET stransistors, it is necesary to use two different voltage levels in the control signal.
This is because the source of the high transistors is connected to the motor, which will suppose a certain voltage in the source when the motor is running.
This voltage would automatically disable the MOSFET if the voltage on the gate is not big enough, what means, the voltage level of the high control signals should be refered to the motor voltage to control the MOSFETs.
As it is pretended to control the H-bridge with the direct signal from the FPGA, it is needed to use a more complex design.

The followed H-bridge design gives the possibility of controlling the motors using a 5V supply and a 3.3V control signal.
Using two p-channel MOSFET in the high part of the driver, it is possible to open and close these MOSFET by setting their gate to ground or the power supply using a secondary n-channel MOSFET driven with a direct FPGA signal as shown in the schematics.

\todo[inline]{write short about the h bridge design and different transistors used}
